#!/usr/bin/env ruby
$: << File.expand_path("../test", __dir__)

require "bundler/setup"

if ENV['DB'].nil?
  puts "Running tests with SQLite..."
  system({"RAILS_ENV" => "test", "DB" => "sqlite"}, "ruby", __FILE__)

  puts "Running tests with PostgreSQL..."
  system({"RAILS_ENV" => "test_postgresql", "DB" => "postgres"}, "ruby", __FILE__)
else
  require "rails/plugin/test"

  # Manually load the test file
  require "rails_uuid_pk_test"
end
